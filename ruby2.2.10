sudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm6 libgdbm-dev libdb-dev
sudo nano /etc/apt/sources.list
# add this line and save
   deb http://security.ubuntu.com/ubuntu bionic-security main
sudo apt-get update
sudo apt-get install libssl1.0-dev
asdf install ruby 2.2.10

sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main" >> /etc/apt/sources.list.d/pgdg.list'
wget -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O - | sudo apt-key add -
sudo apt-get update
sudo apt-get install postgresql-9.6 postgresql-contrib-9.6 libpq-dev

bundle

sudo -u postgres psql -c "create user full_circle with password 'nyhlisted' superuser;"

sudo -u postgres psql -c "create database full_circle_production owner full_circle;"

pg_restore -h localhost -U full_circle -d full_circle_production -v 'backup_202005081900.tar'

sudo -u postgres psql -c "CREATE EXTENSION IF NOT EXISTS pg_trgm;"

sudo -u postgres psql -c "CREATE EXTENSION IF NOT EXISTS fuzzystrmatch;"

sudo -u postgres psql -c "CREATE OR REPLACE FUNCTION pg_search_dmetaphone(text) RETURNS text LANGUAGE SQL IMMUTABLE STRICT AS $function$
  SELECT array_to_string(ARRAY(SELECT dmetaphone(unnest(regexp_split_to_array($1, E'\\\\s+')))), ' ')
$function$;"
